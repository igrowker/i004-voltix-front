<header class="h-auto flex items-center justify-between bg-[#0072CE] relative overflow-hidden p-4">
  <div class="w-36 absolute right-0 z-0">
    <img src="assets/images/rayoAzulLogin.svg" alt="Decoración en forma de rayo azul">
  </div>
  <button class="w-6 h-6 rotate-180" aria-label="Volver al inicio de sesión" (click)="goToForgotPassword()">
    <img src="/assets/icons/chevron-right.svg" alt="Icono de flecha hacia atrás">
  </button>
  <img src="assets/images/VoltixLoginBlanco.svg" class="w-32 z-10" alt="Logo de Voltix">
  <div class="w-11 h-11"></div>
</header>


@if(!showSuccessSection){
<section class="container pt-[50px] pb-[94px] px-5 relative">
  <h2 class="text-2xl text-dark-text font-semibold mb-5">Nueva contraseña</h2>

  <form class="flex flex-col" action="" [formGroup]="newPasswordForm">
    <div>
      <label for="email" class="block mb-[10px] text-base font-medium text-black">Email</label>

      <input formControlName="email" type="email" id="email"
        class="w-full !bg-[#e8e9ed] border !border-[#e8e9ed] !text-dark-text text-base rounded-lg block px-5 py-3 mb-4 !focus:outline-none focus:ring-0 focus:border-[#e8e9ed]"
        placeholder="ejemplo@ejemplo.com" readonly [value]="userEmail" />

      <app-input-password formControlName="new_password" name="new_password" label="Nueva contraseña"
        placeholder="Ingresar nueva contraseña"></app-input-password>

      <div class="containerCheck mb-4">
        <ul class="list-none p-0">
          <!-- Longitud mínima y máxima -->
          <li class="flex items-center">
            <div class="flex items-center w-1/12">
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  (newPasswordForm
                    .get('new_password')
                    ?.hasError('lengthError') ||
                    !newPasswordForm.get('new_password')?.value)
                " src="/assets/icons/redCrossCircle.svg" alt="Error: longitud incorrecta" class="w-4 h-4" />
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  !newPasswordForm
                    .get('new_password')
                    ?.hasError('lengthError') &&
                  newPasswordForm.get('new_password')?.value
                " src="/assets/icons/greenCheckCircle.svg" alt="Correcto: longitud correcta" class="w-4 h-4" />
            </div>
            <div class="ml-2 w-11/12">
              <span class="text-base text-[#6b7280]">
                Mínimo 8 caracteres y máximo 15 caracteres.
              </span>
            </div>
          </li>

          <!-- Mayúsculas y minúsculas -->
          <li class="flex items-center">
            <div class="flex items-center w-1/12">
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  (newPasswordForm
                    .get('new_password')
                    ?.hasError('uppercaseError') ||
                    !newPasswordForm.get('new_password')?.value)
                " src="/assets/icons/redCrossCircle.svg" alt="Error: falta mayúscula" class="w-4 h-4" />
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  !newPasswordForm
                    .get('new_password')
                    ?.hasError('uppercaseError') &&
                  newPasswordForm.get('new_password')?.value
                " src="/assets/icons/greenCheckCircle.svg" alt="Correcto: tiene al menos una mayúscula"
                class="w-4 h-4" />
            </div>
            <div class="ml-2 w-11/12">
              <span class="text-base text-[#6b7280]">
                Al menos 1 mayúscula y 1 minúscula.
              </span>
            </div>
          </li>

          <!-- Carácter especial -->
          <li class="flex items-center">
            <div class="flex items-center w-1/12">
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  (newPasswordForm
                    .get('new_password')
                    ?.hasError('specialCharacterError') ||
                    !newPasswordForm.get('new_password')?.value)
                " src="/assets/icons/redCrossCircle.svg" alt="Error: falta carácter especial" class="w-4 h-4" />
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  !newPasswordForm
                    .get('new_password')
                    ?.hasError('specialCharacterError') &&
                  newPasswordForm.get('new_password')?.value
                " src="/assets/icons/greenCheckCircle.svg" alt="Correcto: tiene al menos un carácter especial"
                class="w-4 h-4" />
            </div>
            <div class="ml-2 w-11/12">
              <span class="text-base text-[#6b7280]">
                Al menos 1 carácter especial.
              </span>
            </div>
          </li>

          <!-- Números -->
          <li class="flex items-center">
            <div class="flex items-center w-1/12">
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  (newPasswordForm
                    .get('new_password')
                    ?.hasError('numberError') ||
                    !newPasswordForm.get('new_password')?.value)
                " src="/assets/icons/redCrossCircle.svg" alt="Error: falta número" class="w-4 h-4" />
              <img *ngIf="
                  newPasswordForm.get('new_password')?.touched &&
                  !newPasswordForm
                    .get('new_password')
                    ?.hasError('numberError') &&
                  newPasswordForm.get('new_password')?.value
                " src="/assets/icons/greenCheckCircle.svg" alt="Correcto: tiene al menos un número" class="w-4 h-4" />
            </div>
            <div class="ml-2 w-11/12">
              <span class="text-base text-[#6b7280]"> Al menos 1 número. </span>
            </div>
          </li>
        </ul>
      </div>

      <app-input-password formControlName="confirm_password" name="confirm_password" label="Repetir la nueva contraseña"
        placeholder="Ingresar nueva contraseña"></app-input-password>
      <div *ngIf="
          newPasswordForm.hasError('mismatch') &&
          newPasswordForm.get('confirm_password')?.touched
        " class="text-red-500 text-sm">
        Las contraseñas no coinciden.
      </div>
    </div>
  </form>

  <button [ngClass]="{
      'bg-primary hover:bg-primary-hover focus:bg-primary-focus text-white':
        isFormValid,
      'text-[#8e95a2] bg-[#e8e8ed] hover:bg-[#e8e8ed] focus:bg-[#e8e8ed] cursor-not-allowed':
        !isFormValid,
    }" class="w-full max-w-96 text-base font-medium rounded-lg py-[14px] px-7 absolute bottom-24" [disabled]="!isFormValid"
    (click)="onSubmit()">
    Aceptar
  </button>
</section>
}@else {
<!-- success -->
<section class="container flex flex-col items-center flex-grow pt-[86px] pb-[60px] px-5">
  <img class="mb-12" src="/assets/images/newPasswordSuccess.svg" alt="restablecer contraseña" />
  <h2 class="text-lg text-dark-text font-medium text-center leading-[1.45]">
    ¡Buenas noticias! Tu nueva contraseña se generó correctamente.
  </h2>

  <button
    class="w-full max-w-96 text-base font-medium bg-primary hover:bg-primary-hover focus:bg-primary-focus text-white rounded-lg py-[14px] px-7 absolute bottom-24" (click)="goToLogin()">
    Iniciar sesión
  </button>
</section>
}
